# å¾ªç¯ç¿»é¡µåŠŸèƒ½å®ç°æ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†IMPA PDFæŸ¥çœ‹å™¨ä¸­å¾ªç¯ç¿»é¡µåŠŸèƒ½çš„å®ç°åŸç†ã€æŠ€æœ¯ç»†èŠ‚å’Œè§£å†³æ–¹æ¡ˆã€‚

## ğŸ¯ åŠŸèƒ½éœ€æ±‚

- **å¾ªç¯ç¿»é¡µ**ï¼šåœ¨39é¡µç‚¹å‡»å‘ä¸Šç¿»é¡µæ—¶ï¼Œè·³è½¬åˆ°1406é¡µï¼ˆæœ€åä¸€é¡µï¼‰
- **åå‘å¾ªç¯**ï¼šåœ¨1406é¡µç‚¹å‡»å‘ä¸‹ç¿»é¡µæ—¶ï¼Œè·³è½¬åˆ°39é¡µï¼ˆç¬¬ä¸€é¡µï¼‰
- **æ­£å¸¸ç¿»é¡µ**ï¼šåœ¨æœ‰æ•ˆèŒƒå›´å†…æ­£å¸¸è·¨ç« èŠ‚ç¿»é¡µ
- **å¤šç«¯æ”¯æŒ**ï¼šæ‚¬æµ®æŒ‰é’®ã€é”®ç›˜å¿«æ·é”®ã€ç§»åŠ¨ç«¯æŒ‰é’®éƒ½æ”¯æŒå¾ªç¯ç¿»é¡µ

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ ¸å¿ƒç»„ä»¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DraggableFloatingButton                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   ä¸Šä¸€é¡µæŒ‰é’®     â”‚  â”‚   é¡µç æ˜¾ç¤º      â”‚  â”‚  ä¸‹ä¸€é¡µæŒ‰é’®  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    handleCrossSectionNavigation             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. è®¡ç®—ç›®æ ‡ç»å¯¹é¡µç  (currentPage Â± 1)                   â”‚ â”‚
â”‚  â”‚ 2. æ£€æŸ¥æ˜¯å¦è¶…å‡ºèŒƒå›´ (39-1406)                           â”‚ â”‚
â”‚  â”‚ 3. å®ç°å¾ªç¯é€»è¾‘ (39â†’1406, 1406â†’39)                      â”‚ â”‚
â”‚  â”‚ 4. æŸ¥æ‰¾ç›®æ ‡é¡µç æ‰€åœ¨ç« èŠ‚                                 â”‚ â”‚
â”‚  â”‚ 5. å†³å®šæ˜¯å¦åˆ‡æ¢ç« èŠ‚                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PageCalculator.findPageInfo              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ éå†æ‰€æœ‰ç« èŠ‚ï¼Œæ‰¾åˆ°åŒ…å«ç›®æ ‡é¡µç çš„ç« èŠ‚                    â”‚ â”‚
â”‚  â”‚ è¿”å›: { absolutePage, relativePage, section, isValid }  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    navigateToPDF (search/page.tsx)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. éªŒè¯ç›®æ ‡é¡µç                                          â”‚ â”‚
â”‚  â”‚ 2. åˆ‡æ¢PDFæ–‡ä»¶                                          â”‚ â”‚
â”‚  â”‚ 3. æ›´æ–°çŠ¶æ€                                             â”‚ â”‚
â”‚  â”‚ 4. è°ƒç”¨PDFViewer.jumpToPage                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PDFViewer.jumpToPage                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ç›´æ¥è®¾ç½®é¡µç ï¼Œä¸è¿›è¡ŒéªŒè¯ï¼ˆé¿å…æ—¶æœºé—®é¢˜ï¼‰                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ æ ¸å¿ƒå®ç°

### 1. å¾ªç¯ç¿»é¡µé€»è¾‘ (DraggableFloatingButton.tsx)

```typescript
// è·¨ç« èŠ‚ç¿»é¡µé€»è¾‘ - åŸºäºç»å¯¹é¡µç 
const handleCrossSectionNavigation = useCallback((direction: 'previous' | 'next') => {
  if (!onSectionChange) return;

  // è·å–å½“å‰ç»å¯¹é¡µç 
  const calculator = PageCalculator.fromPath(selectedPDF);
  if (!calculator) return;
  
  const currentAbsolutePage = calculator.toAbsolutePage(currentPage);
  const targetAbsolutePage = direction === 'next' ? currentAbsolutePage + 1 : currentAbsolutePage - 1;

  // æ£€æŸ¥ç›®æ ‡é¡µç æ˜¯å¦åœ¨æœ‰æ•ˆèŒƒå›´å†…ï¼ˆ39-1406ï¼‰ï¼Œå®ç°å¾ªç¯ç¿»é¡µ
  const firstSection = PDF_CONFIG.sections[0];
  const minPage = firstSection.startPage;
  
  // æ‰¾åˆ°çœŸæ­£çš„æœ€å¤§é¡µç 
  const maxPage = Math.max(...PDF_CONFIG.sections.map(section => section.endPage));

  let finalTargetPage = targetAbsolutePage;
  
  // å®ç°å¾ªç¯ç¿»é¡µ
  if (targetAbsolutePage < minPage) {
    // å¦‚æœç›®æ ‡é¡µç å°äºæœ€å°é¡µç ï¼Œè·³è½¬åˆ°æœ€åä¸€é¡µ
    finalTargetPage = maxPage;  // 39 â†’ 1406
  } else if (targetAbsolutePage > maxPage) {
    // å¦‚æœç›®æ ‡é¡µç å¤§äºæœ€å¤§é¡µç ï¼Œè·³è½¬åˆ°ç¬¬ä¸€é¡µ
    finalTargetPage = minPage;  // 1406 â†’ 39
  }

  // æŸ¥æ‰¾ç›®æ ‡é¡µç æ‰€åœ¨çš„ç« èŠ‚
  const targetPageInfo = PageCalculator.findPageInfo(finalTargetPage);
  
  if (targetPageInfo) {
    // ç›®æ ‡é¡µç åœ¨æŸä¸ªç« èŠ‚ä¸­
    if (targetPageInfo.section.filePath !== selectedPDF) {
      // éœ€è¦åˆ‡æ¢ç« èŠ‚
      onSectionChange(targetPageInfo.section.filePath, targetPageInfo.relativePage);
    } else {
      // åœ¨å½“å‰ç« èŠ‚å†…ç¿»é¡µ
      if (direction === 'next') {
        onNextPage();
      } else {
        onPreviousPage();
      }
    }
  } else {
    // ç›®æ ‡é¡µç è¶…å‡ºèŒƒå›´ï¼Œä¸æ‰§è¡Œä»»ä½•æ“ä½œ
    console.warn(`Target page ${finalTargetPage} is out of range`);
  }
}, [selectedPDF, currentPage, onSectionChange, onNextPage, onPreviousPage]);
```

### 2. é¡µç æŸ¥æ‰¾é€»è¾‘ (PageCalculator.ts)

```typescript
/**
 * æ ¹æ®ç»å¯¹é¡µç æ‰¾åˆ°å¯¹åº”çš„ç« èŠ‚å’Œç›¸å¯¹é¡µç 
 */
static findPageInfo(absolutePage: number): PageInfo | undefined {
  for (const section of PDF_CONFIG.sections) {
    if (absolutePage >= section.startPage && absolutePage <= section.endPage) {
      const calculator = new PageCalculator(section);
      const relativePage = calculator.toRelativePage(absolutePage);
      return {
        absolutePage,
        relativePage,
        section,
        isValid: true
      };
    }
  }
  return undefined;
}
```

### 3. PDFå¯¼èˆªé€»è¾‘ (search/page.tsx)

```typescript
// ç»Ÿä¸€çš„PDFå¯¼èˆªå‡½æ•°
const navigateToPDF = useCallback(async (pdfPath: string, pageNumber?: number) => {
  const calculator = PageCalculator.fromPath(pdfPath);
  if (!calculator) {
    console.error('Section not found:', pdfPath);
    return;
  }

  // å¦‚æœæ²¡æœ‰æä¾›é¡µç ï¼Œä½¿ç”¨å½“å‰é¡µç 
  const validPage = typeof pageNumber === 'number'
    ? calculator.getValidRelativePage(pageNumber)
    : calculator.getValidRelativePage(currentPage);

  // æ‰¹é‡æ›´æ–°æ‰€æœ‰çŠ¶æ€
  if (pdfPath !== selectedPDF) {
    setSelectedPDF(pdfPath);
    setTotalPages(calculator.getTotalPages());
  }

  // æ›´æ–°é¡µç çŠ¶æ€å¹¶è·³è½¬
  setTargetPage(validPage);
  setCurrentPage(validPage);
  pdfViewerRef.current?.jumpToPage(validPage);
}, [selectedPDF, pdfViewerRef, currentPage]);
```

### 4. PDFViewerä¼˜åŒ– (PDFViewer.tsx)

```typescript
// é¡µé¢è·³è½¬ - ç§»é™¤éªŒè¯é€»è¾‘é¿å…æ—¶æœºé—®é¢˜
const goToPage = useCallback((page: number) => {
  const startTime = performanceMonitor.startMeasure();
  
  // å¦‚æœPDFè¿˜åœ¨åŠ è½½ä¸­ï¼Œå…ˆå­˜å‚¨ç›®æ ‡é¡µç 
  if (loading || !pdf) {
    pendingPageRef.current = page;
    performanceMonitor.endMeasure('page_navigation', startTime, { pending: true });
    return;
  }
  
  // ç›´æ¥è®¾ç½®é¡µç ï¼Œä¸è¿›è¡ŒéªŒè¯ï¼ˆå› ä¸ºè°ƒç”¨æ–¹å·²ç»éªŒè¯è¿‡äº†ï¼‰
  // è¿™æ ·å¯ä»¥é¿å…åœ¨ç« èŠ‚åˆ‡æ¢æ—¶ä½¿ç”¨è¿‡æ—¶çš„pdfUrlè¿›è¡ŒéªŒè¯
  setCurrentPage(page);
  onPageChange?.(page, totalPages);
  performanceMonitor.endMeasure('page_navigation', startTime, { success: true });
}, [loading, pdf, onPageChange, performanceMonitor, pdfUrl, totalPages]);
```

## ğŸ› é—®é¢˜è§£å†³

### é—®é¢˜1ï¼šé¡µç è·³è·ƒä¸æ­£ç¡®

**ç°è±¡**ï¼šä»1356é¡µå‘ä¸Šç¿»é¡µï¼Œåº”è¯¥åˆ°1355é¡µï¼Œä½†è·³åˆ°äº†1341é¡µ

**åŸå› **ï¼šåŸæ¥çš„ç¿»é¡µé€»è¾‘åŸºäºç« èŠ‚è¾¹ç•Œåˆ¤æ–­ï¼Œè€Œä¸æ˜¯ç»å¯¹é¡µç çš„è¿ç»­æ€§

**è§£å†³æ–¹æ¡ˆ**ï¼šæ”¹ç”¨åŸºäºç»å¯¹é¡µç çš„ç¿»é¡µé€»è¾‘ï¼Œç¡®ä¿é¡µç è¿ç»­æ€§

### é—®é¢˜2ï¼šå¾ªç¯ç¿»é¡µè·³è½¬åˆ°é”™è¯¯é¡µç 

**ç°è±¡**ï¼š39é¡µå‘ä¸Šç¿»é¡µåº”è¯¥åˆ°1406é¡µï¼Œä½†è·³åˆ°äº†1390é¡µ

**åŸå› **ï¼š
1. PDFé…ç½®ä¸­ç« èŠ‚é¡ºåºä¸æ˜¯æŒ‰é¡µç æ’åˆ—çš„
2. ä½¿ç”¨ `PDF_CONFIG.sections[PDF_CONFIG.sections.length - 1]` è·å–çš„å¯èƒ½æ˜¯é”™è¯¯çš„ç« èŠ‚
3. PDFVieweråœ¨ç« èŠ‚åˆ‡æ¢æ—¶ä½¿ç”¨äº†è¿‡æ—¶çš„ `pdfUrl` è¿›è¡Œé¡µç éªŒè¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ä½¿ç”¨ `Math.max(...PDF_CONFIG.sections.map(section => section.endPage))` æ‰¾åˆ°çœŸæ­£çš„æœ€å¤§é¡µç 
2. ç§»é™¤PDFViewerä¸­çš„é¡µç éªŒè¯é€»è¾‘ï¼Œé¿å…æ—¶æœºé—®é¢˜

### é—®é¢˜3ï¼šPDFVieweré¡µç éªŒè¯æ—¶æœºé—®é¢˜

**ç°è±¡**ï¼šç« èŠ‚åˆ‡æ¢æ—¶ï¼ŒPDFViewerä½¿ç”¨æ—§ç« èŠ‚çš„è®¡ç®—å™¨éªŒè¯æ–°é¡µç 

**åŸå› **ï¼š`pdfUrl` æ›´æ–°å’Œ `jumpToPage` è°ƒç”¨å­˜åœ¨æ—¶æœºå·®å¼‚

**è§£å†³æ–¹æ¡ˆ**ï¼šç§»é™¤PDFViewerä¸­çš„é¡µç éªŒè¯ï¼Œä¿¡ä»»è°ƒç”¨æ–¹çš„éªŒè¯ç»“æœ

## ğŸ“Š æ•°æ®æµ

### æ­£å¸¸ç¿»é¡µæµç¨‹

```
ç”¨æˆ·ç‚¹å‡»ç¿»é¡µæŒ‰é’®
    â†“
handleCrossSectionNavigation('next')
    â†“
è®¡ç®—ç›®æ ‡ç»å¯¹é¡µç  (currentPage + 1)
    â†“
æ£€æŸ¥æ˜¯å¦è¶…å‡ºèŒƒå›´ (39-1406)
    â†“
PageCalculator.findPageInfo(targetPage)
    â†“
åˆ¤æ–­æ˜¯å¦éœ€è¦åˆ‡æ¢ç« èŠ‚
    â†“
navigateToPDF(sectionPath, relativePage)
    â†“
PDFViewer.jumpToPage(relativePage)
    â†“
æ˜¾ç¤ºç›®æ ‡é¡µé¢
```

### å¾ªç¯ç¿»é¡µæµç¨‹

```
ç”¨æˆ·åœ¨39é¡µç‚¹å‡»å‘ä¸Šç¿»é¡µ
    â†“
handleCrossSectionNavigation('previous')
    â†“
è®¡ç®—ç›®æ ‡ç»å¯¹é¡µç  (39 - 1 = 38)
    â†“
æ£€æŸ¥æ˜¯å¦è¶…å‡ºèŒƒå›´ (38 < 39)
    â†“
è§¦å‘å¾ªç¯é€»è¾‘ (finalTargetPage = 1406)
    â†“
PageCalculator.findPageInfo(1406)
    â†“
è¿”å›: { absolutePage: 1406, relativePage: 26, section: '00_10-Provisions_Slop_Chest' }
    â†“
onSectionChange('/pdfs/sections/00_10-Provisions_Slop_Chest.pdf', 26)
    â†“
navigateToPDF('/pdfs/sections/00_10-Provisions_Slop_Chest.pdf', 26)
    â†“
PDFViewer.jumpToPage(26)
    â†“
æ˜¾ç¤º1406é¡µ
```

## ğŸ¨ ç”¨æˆ·ä½“éªŒ

### è§†è§‰åé¦ˆ

- **æ‚¬æµ®æŒ‰é’®**ï¼šå¯æ‹–æ‹½çš„ç¿»é¡µæ§åˆ¶æŒ‰é’®
- **é¡µç æ˜¾ç¤º**ï¼šæ˜¾ç¤ºç»å¯¹é¡µç ï¼ˆå¦‚1406ï¼‰
- **æŒ‰é’®çŠ¶æ€**ï¼šåˆ°è¾¾è¾¹ç•Œæ—¶æŒ‰é’®ä¸ä¼šç¦ç”¨ï¼Œè€Œæ˜¯è§¦å‘å¾ªç¯ç¿»é¡µ

### äº¤äº’æ–¹å¼

- **é¼ æ ‡ç‚¹å‡»**ï¼šç‚¹å‡»ä¸Šä¸‹ç¿»é¡µæŒ‰é’®
- **é”®ç›˜å¿«æ·é”®**ï¼šæ–¹å‘é”®ï¼ˆâ†‘â†“â†â†’ï¼‰
- **ç§»åŠ¨ç«¯**ï¼šè§¦æ‘¸æŒ‰é’®
- **æ‹–æ‹½**ï¼šæ‚¬æµ®æŒ‰é’®å¯æ‹–æ‹½åˆ°ä»»æ„ä½ç½®

## ğŸ” è°ƒè¯•ä¿¡æ¯

### å…³é”®æ—¥å¿—

```typescript
// å¾ªç¯ç¿»é¡µè§¦å‘
console.log(`å¾ªç¯ç¿»é¡µ: ${currentAbsolutePage} â†’ ${finalTargetPage} (ä»ç¬¬ä¸€é¡µè·³è½¬åˆ°æœ€åä¸€é¡µ)`);

// ç« èŠ‚åˆ‡æ¢
console.log(`åˆ‡æ¢ç« èŠ‚: ${selectedPDF} â†’ ${targetPageInfo.section.filePath}, ç›¸å¯¹é¡µç : ${targetPageInfo.relativePage}`);

// é¡µç éªŒè¯
console.log(`æœ‰æ•ˆé¡µç : ${validPage}, æ€»é¡µæ•°: ${calculator.getTotalPages()}`);
```

### æ€§èƒ½ç›‘æ§

```typescript
// é¡µé¢æ¸²æŸ“æ€§èƒ½
performance.ts:48 Performance [page_render]: {duration: '243.70ms'}

// PDFåŠ è½½æ€§èƒ½
performance.ts:48 Performance [pdfjs_load]: {duration: '841.30ms'}

// ç¼“å­˜å‘½ä¸­
performance.ts:48 Performance [cacheRead]: {duration: '143.60ms', key: 'pdf:/pdfs/sections/00_10-Provisions_Slop_Chest.pdf', hit: true}
```

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### 1. ç¼“å­˜ç­–ç•¥

- **PDFæ–‡ä»¶ç¼“å­˜**ï¼š1å¹´æœ‰æ•ˆæœŸ
- **æœç´¢ç»“æœç¼“å­˜**ï¼š7å¤©æœ‰æ•ˆæœŸ
- **é™æ€èµ„æºç¼“å­˜**ï¼š1å¹´æœ‰æ•ˆæœŸ

### 2. æ¸²æŸ“ä¼˜åŒ–

- **é˜²æŠ–å¤„ç†**ï¼šé¿å…é¢‘ç¹é‡æ–°æ¸²æŸ“
- **ä»»åŠ¡å–æ¶ˆ**ï¼šå–æ¶ˆä¹‹å‰çš„æ¸²æŸ“ä»»åŠ¡
- **é«˜DPIæ”¯æŒ**ï¼šé€‚é…é«˜åˆ†è¾¨ç‡æ˜¾ç¤º

### 3. å†…å­˜ç®¡ç†

- **ç»„ä»¶å¸è½½æ¸…ç†**ï¼šç§»é™¤äº‹ä»¶ç›‘å¬å™¨
- **å¼•ç”¨æ¸…ç†**ï¼šæ¸…ç†æ¸²æŸ“ä»»åŠ¡å¼•ç”¨
- **çŠ¶æ€é‡ç½®**ï¼šåˆ‡æ¢ç« èŠ‚æ—¶é‡ç½®ç›¸å…³çŠ¶æ€

## ğŸ“± å¤šç«¯é€‚é…

### æ¡Œé¢ç«¯

- **æ‚¬æµ®æŒ‰é’®**ï¼šå¯æ‹–æ‹½çš„ç¿»é¡µæ§åˆ¶
- **é”®ç›˜å¿«æ·é”®**ï¼šæ–¹å‘é”®æ”¯æŒ
- **é¼ æ ‡æ“ä½œ**ï¼šç‚¹å‡»å’Œæ‹–æ‹½

### ç§»åŠ¨ç«¯

- **åº•éƒ¨æŒ‰é’®**ï¼šå¤§æŒ‰é’®æ˜“è§¦è®¾è®¡
- **è§¦æ‘¸æ”¯æŒ**ï¼šè§¦æ‘¸æ‹–æ‹½å’Œç‚¹å‡»
- **å“åº”å¼å¸ƒå±€**ï¼šé€‚é…ä¸åŒå±å¹•å°ºå¯¸

### å¹³æ¿ç«¯

- **æ··åˆäº¤äº’**ï¼šç»“åˆæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯ä¼˜ç‚¹
- **é€‚ä¸­å°ºå¯¸**ï¼šæŒ‰é’®å¤§å°é€‚ä¸­
- **åŒé‡æ”¯æŒ**ï¼šè§¦æ‘¸å’Œé¼ æ ‡åŒé‡æ”¯æŒ

## ğŸ”§ é…ç½®è¯´æ˜

### PDFç« èŠ‚é…ç½®

```typescript
// PDFé…ç½®æ–‡ä»¶ (src/config/pdf.ts)
export const PDF_CONFIG = {
  sections: [
    {
      name: '15-Cloth_Linen_Products',
      title: '15, Cloth & Linen Products',
      filePath: '/pdfs/sections/15-Cloth_Linen_Products.pdf',
      startPage: 39,    // ç¬¬ä¸€é¡µ
      endPage: 48,
      size: '3.1MB'
    },
    // ... å…¶ä»–ç« èŠ‚
    {
      name: '00_10-Provisions_Slop_Chest',
      title: '00 & 10, Provisions & Slop Chest',
      filePath: '/pdfs/sections/00_10-Provisions_Slop_Chest.pdf',
      startPage: 1381,
      endPage: 1406,    // æœ€åä¸€é¡µ
      size: '9.5MB'
    }
  ]
};
```

### é¡µç èŒƒå›´

- **æœ€å°é¡µç **ï¼š39 (ç¬¬ä¸€ä¸ªç« èŠ‚çš„ç¬¬ä¸€é¡µ)
- **æœ€å¤§é¡µç **ï¼š1406 (æœ€åä¸€ä¸ªç« èŠ‚çš„æœ€åä¸€é¡µ)
- **æ€»é¡µæ•°**ï¼š1368é¡µ (å®é™…è¦†ç›–èŒƒå›´)
- **åŸå§‹æ€»é¡µæ•°**ï¼š1504é¡µ (åŸå§‹PDFæ€»é¡µæ•°)

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹

### åŸºæœ¬åŠŸèƒ½æµ‹è¯•

1. **æ­£å¸¸ç¿»é¡µ**
   - ä»40é¡µå‘ä¸‹ç¿»é¡µ â†’ 41é¡µ
   - ä»41é¡µå‘ä¸Šç¿»é¡µ â†’ 40é¡µ

2. **è·¨ç« èŠ‚ç¿»é¡µ**
   - ä»48é¡µå‘ä¸‹ç¿»é¡µ â†’ 49é¡µ (åˆ‡æ¢ç« èŠ‚)
   - ä»49é¡µå‘ä¸Šç¿»é¡µ â†’ 48é¡µ (åˆ‡æ¢ç« èŠ‚)

3. **å¾ªç¯ç¿»é¡µ**
   - ä»39é¡µå‘ä¸Šç¿»é¡µ â†’ 1406é¡µ
   - ä»1406é¡µå‘ä¸‹ç¿»é¡µ â†’ 39é¡µ

### è¾¹ç•Œæµ‹è¯•

1. **ç¬¬ä¸€é¡µå¾ªç¯**
   - åœ¨39é¡µç‚¹å‡»å‘ä¸Šç¿»é¡µ â†’ åº”è¯¥è·³è½¬åˆ°1406é¡µ

2. **æœ€åä¸€é¡µå¾ªç¯**
   - åœ¨1406é¡µç‚¹å‡»å‘ä¸‹ç¿»é¡µ â†’ åº”è¯¥è·³è½¬åˆ°39é¡µ

3. **æ— æ•ˆé¡µç **
   - é¡µç è¶…å‡ºèŒƒå›´æ—¶ â†’ ä¸æ‰§è¡Œä»»ä½•æ“ä½œ

### å¤šç«¯æµ‹è¯•

1. **æ¡Œé¢ç«¯**
   - æ‚¬æµ®æŒ‰é’®ç¿»é¡µ
   - é”®ç›˜å¿«æ·é”®ç¿»é¡µ
   - æŒ‰é’®æ‹–æ‹½åŠŸèƒ½

2. **ç§»åŠ¨ç«¯**
   - åº•éƒ¨æŒ‰é’®ç¿»é¡µ
   - è§¦æ‘¸æ“ä½œ
   - å“åº”å¼å¸ƒå±€

## ğŸ“ˆ æœªæ¥ä¼˜åŒ–

### åŠŸèƒ½å¢å¼º

1. **ä¹¦ç­¾åŠŸèƒ½**ï¼šä¿å­˜å¸¸ç”¨é¡µç 
2. **å†å²è®°å½•**ï¼šè®°å½•ç¿»é¡µå†å²
3. **å¿«é€Ÿè·³è½¬**ï¼šè¾“å…¥é¡µç ç›´æ¥è·³è½¬
4. **ç« èŠ‚å¯¼èˆª**ï¼šç« èŠ‚åˆ—è¡¨å¿«é€Ÿè·³è½¬

### æ€§èƒ½ä¼˜åŒ–

1. **é¢„åŠ è½½**ï¼šé¢„åŠ è½½ç›¸é‚»ç« èŠ‚
2. **è™šæ‹Ÿæ»šåŠ¨**ï¼šå¤§é‡ç« èŠ‚æ—¶çš„è™šæ‹Ÿæ»šåŠ¨
3. **æ‡’åŠ è½½**ï¼šæŒ‰éœ€åŠ è½½ç« èŠ‚å†…å®¹
4. **å‹ç¼©ä¼˜åŒ–**ï¼šPDFæ–‡ä»¶å‹ç¼©

### ç”¨æˆ·ä½“éªŒ

1. **åŠ¨ç”»æ•ˆæœ**ï¼šç¿»é¡µåŠ¨ç”»
2. **æ‰‹åŠ¿æ”¯æŒ**ï¼šæ»‘åŠ¨æ‰‹åŠ¿ç¿»é¡µ
3. **è¯­éŸ³æ§åˆ¶**ï¼šè¯­éŸ³ç¿»é¡µå‘½ä»¤
4. **æ— éšœç¢æ”¯æŒ**ï¼šå±å¹•é˜…è¯»å™¨æ”¯æŒ

## ğŸ“ æ€»ç»“

å¾ªç¯ç¿»é¡µåŠŸèƒ½çš„å®ç°æ¶‰åŠå¤šä¸ªç»„ä»¶çš„åä½œï¼š

1. **DraggableFloatingButton**ï¼šå¤„ç†ç”¨æˆ·äº¤äº’å’Œå¾ªç¯é€»è¾‘
2. **PageCalculator**ï¼šå¤„ç†é¡µç è®¡ç®—å’Œç« èŠ‚æŸ¥æ‰¾
3. **navigateToPDF**ï¼šå¤„ç†ç« èŠ‚åˆ‡æ¢å’ŒçŠ¶æ€æ›´æ–°
4. **PDFViewer**ï¼šå¤„ç†é¡µé¢æ¸²æŸ“å’Œæ˜¾ç¤º

å…³é”®çš„æŠ€æœ¯è¦ç‚¹ï¼š

- **ç»å¯¹é¡µç è¿ç»­æ€§**ï¼šç¡®ä¿ç¿»é¡µçš„è¿ç»­æ€§
- **æ—¶æœºé—®é¢˜è§£å†³**ï¼šé¿å…ç»„ä»¶é—´çš„æ—¶æœºå†²çª
- **è¾¹ç•Œå¤„ç†**ï¼šæ­£ç¡®å¤„ç†é¡µç èŒƒå›´è¾¹ç•Œ
- **å¤šç«¯é€‚é…**ï¼šæ”¯æŒä¸åŒè®¾å¤‡çš„äº¤äº’æ–¹å¼

é€šè¿‡è¿™ä¸ªå®ç°ï¼Œç”¨æˆ·å¯ä»¥åœ¨PDFæ–‡æ¡£ä¸­å®ç°æ— ç¼çš„å¾ªç¯ç¿»é¡µä½“éªŒï¼Œå¤§å¤§æå‡äº†é˜…è¯»çš„ä¾¿åˆ©æ€§ã€‚
